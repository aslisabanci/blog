{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/filter-aws-lambda-logs","result":{"data":{"markdownRemark":{"id":"79347d38-5fb8-5f1c-a5d3-e0924150072c","html":"<p>If you want see the graph of your Lambda function’s specific log messages’ count and create a CloudWatch dashboard widget out of it, you can have this setup:</p>\n<p>Let’s have an example: Your Lambda function logs down a message like “Performed {x} operation for input {y}” and you want to watch when this happens, over a graph (widget) on a CloudWatch dashboard.</p>\n<ul>\n<li>Open up your dashboard and click on Add Widget -> Query Results and then Configure.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/66e8b6a8c7638020957a83f0e93fbbbc/d698c/widget.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABiElEQVQoz31S2U7DQAzcD+aDQIh3jhf+gAoVhEQRSAVaoImiXmnuo9vcyZBZtH1Aaq2MbMvZtcezYjKZYD6fw7IsGIaB1WqFMAzh+z6CIFBgfAie9p4Hx3EgXNdFkiSI4xhRFKl4t9tBSqnAuCgK5Hmu/P+4KkuUvdcQvCTLMnWYfrvdKjDX/pjJvEb/Ias6ZGUDkaap6tS2rULXdSj7rjTGNNLebDZomkbljJMkRt10sP0Yw4dHPI9e4MUZBKkul0vFn1TqusZoNIJpmvuLZ7MZptMpqqpSlw6HQwwGdyiqGmsnwPnZKW6urxCmOYTuTmqckLTH47ESijkb2ra9p8gVEW37N+3rxzfeP6dY2S6cSEJQBILicCKCDdbrtRKEU1H5xWKhGLAJ2VBZWpxKfP2YMKy+XlQQnIyHKIDeoRaHMSnyGXEq/kcwJxij61mEAWQaqwaCBe6NRT2hPqhz1on/eVGUkFmBNKsQbEskst8hBTn0kI/lQQ/X87G0PVzeGzi5eMPtk4Vfkpn4bMieU54AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/blog/static/66e8b6a8c7638020957a83f0e93fbbbc/8ac56/widget.webp 240w,\n/blog/static/66e8b6a8c7638020957a83f0e93fbbbc/d3be9/widget.webp 480w,\n/blog/static/66e8b6a8c7638020957a83f0e93fbbbc/e46b2/widget.webp 960w,\n/blog/static/66e8b6a8c7638020957a83f0e93fbbbc/f992d/widget.webp 1440w,\n/blog/static/66e8b6a8c7638020957a83f0e93fbbbc/bb429/widget.webp 1846w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/blog/static/66e8b6a8c7638020957a83f0e93fbbbc/8ff5a/widget.png 240w,\n/blog/static/66e8b6a8c7638020957a83f0e93fbbbc/e85cb/widget.png 480w,\n/blog/static/66e8b6a8c7638020957a83f0e93fbbbc/d9199/widget.png 960w,\n/blog/static/66e8b6a8c7638020957a83f0e93fbbbc/07a9c/widget.png 1440w,\n/blog/static/66e8b6a8c7638020957a83f0e93fbbbc/d698c/widget.png 1846w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/blog/static/66e8b6a8c7638020957a83f0e93fbbbc/d9199/widget.png\"\n            alt=\"widget\"\n            title=\"widget\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>Select your log group, which should be like <code class=\"language-text\">/aws/lambda/{your_lambda_name}</code></li>\n<li>Put in your query, which is the most exciting part. Below is an example when you want to count the stats of a specific operation for your case. If you want to count the total number of times that this log message appears, then omit the filter part where you filter for the specific operation.</li>\n</ul>\n<p><code class=\"language-text\">fields @message\n| filter @message like /operation for input/\n| parse @message /\\\\[(?&lt;level>\\\\S+)\\\\]\\\\s(\\\\S+)\\\\s(\\\\S+)\\\\s(?&lt;op_name>\\\\S+) operation for input (?&lt;input>\\\\S+)/\n| filter op_name == {op_name_you_want_to_watch}\n| stats count(op_name) by bin(5m)</code></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/95ac795620598a51db98d7caae11d0d8/d38ac/query.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABNklEQVQoz41S2W6DMBD0//9clYcmBQPG2JwlDRjMUQWma0dEfWjVrjSa8XpYjwEWRRxJkkBrha7vYCeL0Y4ew/gdA0bi68cVdV2jIpTNFU3ToCZUVYW2bcFeLxqn0wsZbugaA9MajB0NvA1YlwXruuBzXUmvnpdphh3p0IE8xIe2FKDve7A4KRHxEJlU0HEOJTTSJEUmUpS5hs4kZMyRhhKpyKCFQp4WKGSBMlME8kiN97ryKVkchV4IIaBpQFEWCMIQnHPkee775/MZb0GAC5cQ7mDyKXpFSmsP7VgpD2ZuLT1EiWSGha647/sT27Z5fpbvb77/E5yXTfNMg2bMxPf73W8cfMCtH/h92OFjwzDgr9rxv/IDjTGYpsn/EtZarw926R279E5bSz33ld3e9NAHO49L+QV34mP3CR+gPgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/blog/static/95ac795620598a51db98d7caae11d0d8/8ac56/query.webp 240w,\n/blog/static/95ac795620598a51db98d7caae11d0d8/d3be9/query.webp 480w,\n/blog/static/95ac795620598a51db98d7caae11d0d8/e46b2/query.webp 960w,\n/blog/static/95ac795620598a51db98d7caae11d0d8/f992d/query.webp 1440w,\n/blog/static/95ac795620598a51db98d7caae11d0d8/7e696/query.webp 1744w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/blog/static/95ac795620598a51db98d7caae11d0d8/8ff5a/query.png 240w,\n/blog/static/95ac795620598a51db98d7caae11d0d8/e85cb/query.png 480w,\n/blog/static/95ac795620598a51db98d7caae11d0d8/d9199/query.png 960w,\n/blog/static/95ac795620598a51db98d7caae11d0d8/07a9c/query.png 1440w,\n/blog/static/95ac795620598a51db98d7caae11d0d8/d38ac/query.png 1744w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/blog/static/95ac795620598a51db98d7caae11d0d8/d9199/query.png\"\n            alt=\"query\"\n            title=\"query\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>Run your query and if all looks fine, also check the Visualization.</li>\n</ul>\n<p>Then create your widget and enjoy watching your graph.</p>","fields":{"slug":"/posts/filter-aws-lambda-logs","tagSlugs":["/tag/aws/","/tag/data-engineering/","/tag/lambda/","/tag/cloud-watch/"]},"frontmatter":{"date":"2019-31-10T22:12:03.284Z","description":"If you want see the graph of your Lambda function's specific log messages' count and create a CloudWatch dashboard widget out of it, you can have this setup.","tags":["aws","data-engineering","lambda","cloud-watch"],"title":"How to Filter AWS Lambda Log Messages for CloudWatch Dashboard Widget","socialImage":{"publicURL":"/blog/static/4423eb1b5daf754c0500a68e75fa4f70/thumbnail-cloudwatch.png"}}}},"pageContext":{"slug":"/posts/filter-aws-lambda-logs"}},"staticQueryHashes":["251939775","401334301","4120999787"]}